var t;t=new/*#__PURE__*/(function(){var t;function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,e),this.board=t,this.score=0,this.status="idle"}return t=[{key:"getState",value:function(){return this.board}},{key:"getScore",value:function(){return this.score}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){this.board=this.generateNewTile(this.generateNewTile(this.board)),this.score=0,this.status="playing"}},{key:"restart",value:function(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="playing"}},{key:"generateNewTile",value:function(t){for(var e=[],r=0;r<t.length;r++)for(var n=0;n<t[r].length;n++)0===t[r][n]&&e.push({x:r,y:n});if(e.length>0){var a=e[Math.floor(Math.random()*e.length)],s=a.x,o=a.y;t[s][o]=.9>Math.random()?2:4}return t}},{key:"moveLeft",value:function(){this.board=this.combine(this.slide(this.board)),this.board=this.generateNewTile(this.board)}},{key:"moveRight",value:function(){this.board=this.reverse(this.board),this.moveLeft(),this.board=this.reverse(this.board)}},{key:"moveUp",value:function(){this.board=this.transpose(this.board),this.moveLeft(),this.board=this.transpose(this.board)}},{key:"moveDown",value:function(){this.board=this.transpose(this.board),this.moveRight(),this.board=this.transpose(this.board)}},{key:"slide",value:function(t){return t.map(function(t){var e=t.filter(function(t){return t}),r=Array(4-e.length).fill(0);return e.concat(r)})}},{key:"combine",value:function(t){for(var e=0;e<t.length;e++)for(var r=0;r<t[e].length-1;r++)t[e][r]===t[e][r+1]&&0!==t[e][r]&&(t[e][r]*=2,t[e][r+1]=0,this.score+=t[e][r]);return t}},{key:"reverse",value:function(t){return t.map(function(t){return t.reverse()})}},{key:"transpose",value:function(t){return t[0].map(function(e,r){return t.map(function(t){return t[r]})})}}],function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,t),e}()),document.addEventListener("DOMContentLoaded",function(){var e=function(){l.textContent=t.getScore();for(var e=t.getState(),r=u.getElementsByTagName("td"),n=0;n<r.length;n++){var a=Math.floor(n/4),s=n%4,o=e[a][s];r[n].className="field-cell",0!==o?(r[n].classList.add("field-cell--".concat(o)),r[n].textContent=o):r[n].textContent=""}"win"===t.getStatus()?(d.classList.remove("hidden"),h.classList.add("hidden"),c.classList.add("hidden")):"lose"===t.getStatus()?(h.classList.remove("hidden"),d.classList.add("hidden"),c.classList.add("hidden")):(d.classList.add("hidden"),h.classList.add("hidden"))},r=function(){t.start(),i.textContent="Restart",i.classList.remove("start"),i.classList.add("restart"),c.classList.add("hidden"),e()},n=function(){t.restart(),i.textContent="Start",i.classList.remove("restart"),i.classList.add("start"),a()},a=function(){var t=u.getElementsByTagName("td"),r=!0,n=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var l=s.value;l.className="field-cell",l.textContent=""}}catch(t){n=!0,a=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}i.textContent="Start",i.classList.remove("restart"),i.classList.add("start"),c.classList.remove("hidden"),e()},s=function(t){for(var e=0;e<4;e++)for(var r=0;r<4;r++)if(0===t[e][r]||3!==e&&t[e][r]===t[e+1][r]||3!==r&&t[e][r]===t[e][r+1])return!0;return!1},o=function(t){var e=!0,r=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(e=(a=s.next()).done);e=!0)if(a.value.includes(2048))return!0}catch(t){r=!0,n=t}finally{try{e||null==s.return||s.return()}finally{if(r)throw n}}return!1},i=document.querySelector(".button.start"),l=document.querySelector(".game-score"),u=document.querySelector(".game-field"),c=document.querySelector(".message-start"),d=document.querySelector(".message-win"),h=document.querySelector(".message-lose");i.addEventListener("click",function(){"Start"===i.textContent?r():n()}),document.addEventListener("keydown",function(r){if("playing"===t.getStatus()){var n=!1;switch(r.key){case"ArrowLeft":t.moveLeft(),n=!0;break;case"ArrowRight":t.moveRight(),n=!0;break;case"ArrowUp":t.moveUp(),n=!0;break;case"ArrowDown":t.moveDown(),n=!0}n&&(e(),s(t.getState())||(t.status="lose",e()),o(t.getState())&&(t.status="win",e()))}}),a()});
//# sourceMappingURL=index.3f13870b.js.map
